var lt=Object.defineProperty;var ct=(r,t,e)=>t in r?lt(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var L=(r,t,e)=>(ct(r,typeof t!="symbol"?t+"":t,e),e);import{S as W,i as q,s as J,e as p,k as S,c as b,a as y,d as m,m as G,b as R,g as B,F as v,X as V,t as O,h as T,j as ht,M as ut,N as ft,O as At,q as I,o as U,l as H,n as dt,p as mt,a0 as gt,L as vt,w as wt,x as pt,y as bt,B as yt,v as Rt,C as Y,a1 as j,a2 as P,E as Bt,a3 as zt,I as Mt}from"./index-ca2f52f9.js";import{c as M}from"./singletons-d1fb5791.js";import{s as xt}from"./toast-5d1f15b7.js";M.disable_scroll_handling;const Z=M.goto;M.invalidate;M.prefetch;M.prefetch_routes;M.before_navigate;M.after_navigate;/*! @gera2ld/jsx-dom v2.1.1 | ISC License */var $=1,tt=2,z=1,et=4,Ct="http://www.w3.org/2000/svg",F="http://www.w3.org/1999/xlink",Et={show:F,actuate:F,href:F},kt=function(t){return typeof t=="string"||typeof t=="number"},It=function(t){return(t==null?void 0:t.vtype)===$},Qt=function(t){return(t==null?void 0:t.vtype)===tt};function C(r,t){var e;if(typeof r=="string")e=$;else if(typeof r=="function")e=tt;else throw new Error("Invalid VNode type");return{vtype:e,type:r,props:t}}var it=C;function _t(r){return r.children}var St={isSvg:!1};function D(r,t){if(t.type===z)t.node!=null&&r.append(t.node);else if(t.type===et)t.children.forEach(function(e){D(r,e)});else throw new Error("Unkown ref type "+JSON.stringify(t))}function Gt(r,t,e){for(var i in t)i==="key"||i==="children"||i==="ref"||(i==="dangerouslySetInnerHTML"?r.innerHTML=t[i].__html:i==="innerHTML"||i==="textContent"||i==="innerText"?r[i]=t[i]:i.startsWith("on")?r[i.toLowerCase()]=t[i]:Ot(r,i,t[i],e.isSvg))}var Nt={className:"class",labelFor:"for"};function Ot(r,t,e,i){if(t=Nt[t]||t,e===!0)r.setAttribute(t,"");else if(e===!1)r.removeAttribute(t);else{var s=i?Et[t]:void 0;s!==void 0?r.setAttributeNS(s,t,e):r.setAttribute(t,e)}}function k(r,t){if(t===void 0&&(t=St),r==null||typeof r=="boolean")return{type:z,node:null};if(r instanceof Node)return{type:z,node:r};if(Qt(r)){var e=r,i=e.type,s=e.props;if(i===_t){var a=document.createDocumentFragment();if(s.children){var n=k(s.children,t);D(a,n)}return{type:z,node:a}}var o=i(s);return k(o,t)}if(kt(r))return{type:z,node:document.createTextNode(""+r)};if(It(r)){var l,u=r,f=u.type,g=u.props;!t.isSvg&&f==="svg"&&(t=Object.assign({},t,{isSvg:!0})),t.isSvg?l=document.createElementNS(Ct,f):l=document.createElement(f),Gt(l,g,t);var c;if(g.children){var h=t;t.isSvg&&f==="foreignObject"&&(h=Object.assign({},h,{isSvg:!1})),c=k(g.children,h)}c!=null&&D(l,c);var d=g.ref;return typeof d=="function"&&d(l),{type:z,node:l}}if(Array.isArray(r))return{type:et,children:r.map(function(A){return k(A,t)})};throw new Error("mount: Invalid Vnode!")}function rt(r){for(var t=[],e=0;e<r.length;e+=1){var i=r[e];Array.isArray(i)?t=t.concat(rt(i)):i!=null&&t.push(i)}return t}function st(r){return r.type===z?r.node:r.children.map(st)}function nt(r){return Array.isArray(r)?rt(r.map(nt)):st(k(r))}/*! markmap-toolbar v0.13.5 | MIT License */function Q(){return Q=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Q.apply(this,arguments)}/*! markmap-common v0.13.4 | MIT License */Math.random().toString(36).slice(2,8);function Tt(r,t,e="children"){const i=(s,a)=>t(s,()=>{var n;(n=s[e])==null||n.forEach(o=>{i(o,s)})},a);i(r)}const at="mm-toolbar-item",Ut="active";function Ft(){return it("a",{className:"mm-toolbar-brand",href:"https://markmap.js.org/",children:[C("img",{alt:"markmap",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAACoFBMVEUAAAAAAAD//wAAAACAgAD//wAAAABVVQCqqgBAQACAQACAgABmZgBtbQAAAABgQABgYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAaFQAAAAAAAAAAAAAAAAAHAAARBQIdGAIYEwI/OgJYUQUfHQI+OgJDPgJJRARBPQRJQgRRSwRRTQRIQQRUTgRUUARZUgRSTQRPSQRjWgZORQRfWQZsZAhTTQRNRwRWUAZkXAZOSARUTgZPRwRRSQRoYwZWUQZWTgRbUwZmXQZoXghmXwdqYwdsYwdfVwVmXQdqYgdiWgVpYAl3bgl6cgl4cAqLggw8OAOWjA2Uig1OSAR2bQihlg55cAh5cAh6cQmMgwyOhAyUjA2QhQ2Uiw2Viw2soBCflA+voxGwpRGhlg+hlg+snxGroBGjmBCpnBC0pxKyphKxpRG2qhK0qBK5rBK5rBP/7h3/8B7/8R3/8h3/8R7/8h786x397B3+7R3EtxT66Rz66hz76hz86xz96xz97Bz+7Rz45xz56Bz76hz97Bz97B3MvRX15Rv25Rv45xz66Rz76hz97B3+7R3IuxX05Bv15Bv25Rz56Bz66Ry/sxPAsxPCtRTCthTNvxbZyxfczxfi0xjl1Rnn2Bnr2xrr3Brs3Rru3Rru3xrv3hrw3xrx4Bvx4Rvy4hvz4hvz4xv04xv05Bv14xv15Bv15Rv25Bv25Rv25Rz25hv35hv35xv45xv45xz55xz56Bv56Bz66Rv66Rz76Rv76Rz76hz86hv86xz+7h3/7R3/7h3/7x3/8B3/8B7/8R3/8R4Yqhj5AAAAq3RSTlMAAQECAgIDAwMEBAQFBwgICAwQERITFRYXGBkbHB0eHyQlJyguNTg8RUZISU5PV2FiY2RlZmdqa2xubnJzc3R2d3d3eXl5eXp7fH1+gIGCgoKDg4SEhIWGh4eHiYmJjIyMjZSUlJ+sra+zt7i4uru8ztHV1tbW2d7g4OHi4uPk5ufp7Ozv9fX29/f3+Pj6+vr7+/v7+/v7+/z8/Pz8/f39/f39/f3+/v7+/v7K6J1dAAACHklEQVQ4y2NgwAoYWdi5uLm5GXHIcrLCmMzYpDmAhKCKjoGtp40MFhVsDAwSxmmVEzZu2XvqSLkchjw3g0h445Ybd24vmTN1Usd5X3R5DgaNqgN35sycP2/GxMkTMRVwMOivvtO3YsWUm3duX790EcMKdgbNNXdnnJh1+9T6ipzU+FB0RzIyiFYB5WdfaElUF8TmTQ6GwH39J2bvypMHcpg4MAKKkUGo5s6KWRfyGRh4WJClGEGBCgS8DLobliy/3abMwM8NBYwQjXDgf3ryxOspyKYyg+RFTFwdnYDAzbrw+oLFm9Ot3J3AwNHFTBykQrhg++GDh48cOXzk4P6VZy8s230MyAGCwwcP7iyRBJpiur1n8hQIWHX27NkLi6bAwOSuow5ABeY7OydOhoCFIAULe6E8YFCf8QAqEC86evniZTA4tfLsuRXHr0E4ly9ePF0uC3KnpH1MZBQQxPoVgxyZ5RMdBQaRMc6yIEcihWbQGaA3k9G8CfQoN0pAtSoxCMACihk9qGtBQZ2LHtRIkRUMiqwd2TJADiswsrjQlAGju/o+MLrPNkWo8mFN1ewMWmvBCebQ0rKMJG87QzF0FRwMRuvugpLcrXu3rp7Zs61UCtMZ2nVHbk+fMX/+jMmTp3Sf9MLiULG45q237txaPG3yxPYrYQzYMo60RWbD3E27Ll68Uq+AK+uJqOlZBiSEKGLNnMA0iDfzwrI/NKgBOivk9piPdtUAAAAASUVORK5CYII="}),C("span",{children:"markmap"})]})}function Vt({title:r,content:t,onClick:e}){return C("div",{className:at,title:r,onClick:e,children:t})}let N;function Dt(r){return async(...t)=>{if(!N){N=r(...t);try{await N}finally{N=null}}}}class w{static create(t){const e=new w;return e.attach(t),e.render()}static icon(t,e={}){return e=Q({stroke:"none",fill:"currentColor","fill-rule":"evenodd"},e),C("svg",{width:"20",height:"20",viewBox:"0 0 20 20",children:C("path",Q({},e,{d:t}))})}constructor(){this.showBrand=!0,this.registry={},this.markmap=null,this.register({id:"zoomIn",title:"Zoom in",content:w.icon("M9 5v4h-4v2h4v4h2v-4h4v-2h-4v-4z"),onClick:this.getHandler(t=>t.rescale(1.25))}),this.register({id:"zoomOut",title:"Zoom out",content:w.icon("M5 9h10v2h-10z"),onClick:this.getHandler(t=>t.rescale(.8))}),this.register({id:"fit",title:"Fit window size",content:w.icon("M4 7h2v-2h2v4h-4zM4 13h2v2h2v-4h-4zM16 7h-2v-2h-2v4h4zM16 13h-2v2h-2v-4h4z"),onClick:this.getHandler(t=>t.fit())}),this.register({id:"recurse",title:"Recursively toggle the next node",content:w.icon("M16 4h-12v12h12v-8h-8v4h2v-2h4v4h-8v-8h10z"),onClick:t=>{const e=t.target.closest(`.${at}`),i=()=>e.classList.toggle(Ut),s=i();this.handleRecurse(s,i)}}),this.setItems(w.defaultItems)}setBrand(t){this.showBrand=t}register(t){this.registry[t.id]=t}getHandler(t){return t=Dt(t),()=>{this.markmap&&t(this.markmap)}}setItems(t){this.items=[...t]}attach(t){this.markmap=t}handleRecurse(t,e){const i=this.markmap;if(!t){var s,a;(s=i.handleClick)==null||(a=s.__reset)==null||a.call(s);return}const n=i.handleClick;if(!n)return;const o=(l,u)=>{var f;const g=(f=u.data.payload)!=null&&f.fold?0:1;Tt(u.data,(c,h)=>{c.payload=Q({},c.payload,{fold:g}),h()}),i.renderData(u.data),e(),o.__reset()};o.__reset=()=>{i.handleClick=n},i.handleClick=o}render(){const t=this.items.map(e=>{if(typeof e=="string"){const i=this.registry[e];return i||console.warn(`[markmap-toolbar] ${e} not found`),i}return e}).filter(Boolean);return nt(it("div",{className:"mm-toolbar",children:[this.showBrand&&Ft(),t.map(Vt)]}))}}w.defaultItems=["zoomIn","zoomOut","fit","recurse"];function K(r){let t,e,i,s,a,n,o,l,u,f=r[1]&&X(r);const g=r[4].default,c=vt(g,r,r[3],null);return{c(){t=p("div"),e=p("div"),i=S(),s=p("div"),f&&f.c(),a=S(),n=p("div"),c&&c.c(),this.h()},l(h){t=b(h,"DIV",{class:!0});var d=y(t);e=b(d,"DIV",{class:!0}),y(e).forEach(m),i=G(d),s=b(d,"DIV",{class:!0});var A=y(s);f&&f.l(A),a=G(A),n=b(A,"DIV",{class:!0});var E=y(n);c&&c.l(E),E.forEach(m),A.forEach(m),d.forEach(m),this.h()},h(){R(e,"class","modal-backdrop"),R(n,"class","text-sm"),R(s,"class","modal-content"),R(t,"class","modal")},m(h,d){B(h,t,d),v(t,e),v(t,i),v(t,s),f&&f.m(s,null),v(s,a),v(s,n),c&&c.m(n,null),o=!0,l||(u=V(e,"click",r[2]),l=!0)},p(h,d){h[1]?f?f.p(h,d):(f=X(h),f.c(),f.m(s,a)):f&&(f.d(1),f=null),c&&c.p&&(!o||d&8)&&ut(c,g,h,h[3],o?At(g,h[3],d,null):ft(h[3]),null)},i(h){o||(I(c,h),o=!0)},o(h){U(c,h),o=!1},d(h){h&&m(t),f&&f.d(),c&&c.d(h),l=!1,u()}}}function X(r){let t,e;return{c(){t=p("div"),e=O(r[1]),this.h()},l(i){t=b(i,"DIV",{class:!0});var s=y(t);e=T(s,r[1]),s.forEach(m),this.h()},h(){R(t,"class","text-center text-lg font-semibold mb-2")},m(i,s){B(i,t,s),v(t,e)},p(i,s){s&2&&ht(e,i[1])},d(i){i&&m(t)}}}function Lt(r){let t,e,i=r[0]&&K(r);return{c(){i&&i.c(),t=H()},l(s){i&&i.l(s),t=H()},m(s,a){i&&i.m(s,a),B(s,t,a),e=!0},p(s,[a]){s[0]?i?(i.p(s,a),a&1&&I(i,1)):(i=K(s),i.c(),I(i,1),i.m(t.parentNode,t)):i&&(dt(),U(i,1,1,()=>{i=null}),mt())},i(s){e||(I(i),e=!0)},o(s){U(i),e=!1},d(s){i&&i.d(s),s&&m(t)}}}function Ht(r,t,e){let{$$slots:i={},$$scope:s}=t,{show:a=!1}=t,{title:n}=t;const o=gt();function l(){o("close")}return r.$$set=u=>{"show"in u&&e(0,a=u.show),"title"in u&&e(1,n=u.title),"$$scope"in u&&e(3,s=u.$$scope)},[a,n,l,s,i]}class Yt extends W{constructor(t){super(),q(this,t,Ht,Lt,J,{show:0,title:1})}}function jt(r){let t,e,i,s,a,n,o,l,u,f,g;return{c(){t=p("p"),e=O("You should save them in Gist or other file services. Do you still want to continue?"),i=S(),s=p("div"),a=p("a"),n=O("Cancel"),o=S(),l=p("a"),u=O("OK"),this.h()},l(c){t=b(c,"P",{});var h=y(t);e=T(h,"You should save them in Gist or other file services. Do you still want to continue?"),h.forEach(m),i=G(c),s=b(c,"DIV",{class:!0});var d=y(s);a=b(d,"A",{});var A=y(a);n=T(A,"Cancel"),A.forEach(m),o=G(d),l=b(d,"A",{class:!0});var E=y(l);u=T(E,"OK"),E.forEach(m),d.forEach(m),this.h()},h(){R(l,"class","text-gray-500"),R(s,"class","modal-footer")},m(c,h){B(c,t,h),v(t,e),B(c,i,h),B(c,s,h),v(s,a),v(a,n),v(s,o),v(s,l),v(l,u),f||(g=[V(a,"click",P(r[2])),V(l,"click",P(r[3]))],f=!0)},p:Bt,d(c){c&&m(t),c&&m(i),c&&m(s),f=!1,zt(g)}}}function Pt(r){let t,e,i,s,a;return s=new Yt({props:{show:r[1],title:"Your changes will be lost!",$$slots:{default:[jt]},$$scope:{ctx:r}}}),s.$on("close",r[2]),{c(){t=p("div"),i=S(),wt(s.$$.fragment),this.h()},l(n){t=b(n,"DIV",{class:!0}),y(t).forEach(m),i=G(n),pt(s.$$.fragment,n),this.h()},h(){R(t,"class",e=r[4].class)},m(n,o){B(n,t,o),r[9](t),B(n,i,o),bt(s,n,o),a=!0},p(n,[o]){(!a||o&16&&e!==(e=n[4].class))&&R(t,"class",e);const l={};o&2&&(l.show=n[1]),o&8192&&(l.$$scope={dirty:o,ctx:n}),s.$set(l)},i(n){a||(I(s.$$.fragment,n),a=!0)},o(n){U(s.$$.fragment,n),a=!1},d(n){n&&m(t),r[9](null),n&&m(i),yt(s,n)}}}function Zt(r,t,e){let i,{mm:s}=t,{dirty:a}=t,{showBrand:n=!1}=t,{isFull:o=!1}=t,l=!1;const u=new w;u.setBrand(n),u.register({id:"repl",title:"Open in REPL",content:w.icon("M4 5v10h12v-10zM6 7v6h3v-6zM14 7v6h-3v-6z"),onClick:h}),u.register({id:"full",title:"Full page view",content:w.icon("M4 9v-4h4v2h-2v2zM4 11v4h4v-2h-2v-2zM16 9v-4h-4v2h2v2zM16 11v4h-4v-2h2v-2z"),onClick:f}),u.setItems(["zoomIn","zoomOut","fit","recurse",o?"repl":"full"]),Rt(()=>{i.append(u.render())});function f(){a?e(1,l=!0):c()}function g(){e(1,l=!1)}function c(){Z("/full"+window.location.hash)}function h(){Z("/repl"+window.location.hash)}function d(A){Mt[A?"unshift":"push"](()=>{i=A,e(0,i)})}return r.$$set=A=>{e(4,t=Y(Y({},t),j(A))),"mm"in A&&e(5,s=A.mm),"dirty"in A&&e(6,a=A.dirty),"showBrand"in A&&e(7,n=A.showBrand),"isFull"in A&&e(8,o=A.isFull)},r.$$.update=()=>{r.$$.dirty&32&&u.attach(s)},t=j(t),[i,l,g,c,t,s,a,n,o,d]}class re extends W{constructor(t){super(),q(this,t,Zt,Pt,J,{mm:5,dirty:6,showBrand:7,isFull:8})}}const x=class{constructor(t,e){this.type=t,this.data=e,this.desc=x.descriptions[t]||"Unknown"}isValidGist(){return this.type==="gist"&&/^\w+\//.test(this.data)}asUrl(){switch(this.type){case"gist":if(!this.isValidGist())throw new Error("Gist owner is missing");const[t,e]=this.data.split(":");return`https://gist.githubusercontent.com/${t}/raw/${e||"markmap.md"}`;case"github":const[i,s]=this.data.split(":"),[a,n]=i.split("@");return`https://raw.githubusercontent.com/${a}/${n||"main"}/${s||"README.md"}`;default:return this.data}}asData(){switch(this.type){case"gist":case"github":return`${this.type}:${this.data}`;default:return this.data}}async load(){const t=await this.asUrl(),e=await fetch(t);return ot(e),e.text()}static parseSync(t){if(t instanceof x)return t;let e,i;for(const s of["gist","github"])if(t.startsWith(`${s}:`)){e=s,i=t.slice(s.length+1);break}if(!e){const s=new URL(t);if(s.origin==="https://raw.githubusercontent.com"){const[,a,n,o,...l]=s.pathname.split("/");e="github",i=[`${a}/${n}`,o&&`@${o}`,l.length&&`:${l.join("/")}`].filter(Boolean).join("")}else if(s.origin==="https://gist.githubusercontent.com"||s.origin==="https://gist.github.com"){const[,a,n,o,...l]=s.pathname.split("/");e="gist",i=[`${a}/${n}`,l.length&&`${l.join("/")}`].filter(Boolean).join(":")}}return e||(e=/^https?:\/\/./.test(t)&&"url",i=t),new x(e,i)}static async parse(t){const e=x.parseSync(t);if(e.type==="gist"&&!e.isValidGist()){const[i]=e.data.split(":"),s=await Wt(i);e.data=`${s}/${e.data}`}return e}};let _=x;L(_,"descriptions",{gist:"GitHub Gist",github:"GitHub Raw",url:"URL"});const Kt=_.parseSync("gist:gera2ld/af76a4c245b302206b16aec503dbe07b");function Xt(r){return r.replace(/[<&]/g,t=>({"<":"&lt;","&":"&amp;"})[t])}function ot(r){if(!r.ok)throw new TypeError(`Failed to fetch, got response "${r.status} ${r.statusText}"`);return r}async function Wt(r){const t=await fetch(`https://api.github.com/gists/${r}`,{headers:{Accept:"application/vnd.github.v3+json"}});return ot(t),(await t.json()).owner.login}async function qt(r){return(await _.parse(r)).load()}function Jt(r){let t;async function e(){const i={};t=i;const s=new URLSearchParams(window.location.hash.slice(1));let a=s.get("gist");const n=s.get("d");if(a&&!n){a.includes(":")||(a=`gist:${a}`);const u=`#?d=${a}`;await Promise.resolve(),window.location.hash=u;return}let o,l;try{l=await qt(n||Kt)}catch(u){o=u}if(i===t&&(l&&r(l),o))if(o.name==="TypeError"&&/failed to fetch/i.test(o.message))xt({title:"Failed to fetch",html:['<div class="mt-1">Please check your network and resource</div>',n&&`<div class="mt-1 text-xs text-gray-600">${Xt(n)}</div>`].filter(Boolean).join("")});else throw o}return e}function se(r){const t=Jt(r);return window.addEventListener("hashchange",t),t(r),()=>window.removeEventListener("hashchange",t)}export{Yt as M,re as T,_ as U,Kt as d,qt as l,se as s};
